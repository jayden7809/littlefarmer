// /data/chatData.js  — cute & friendly tone version

// ───────────────────────────────────────────────────────────────────────────
// 빠른 배지 (아이콘 경로는 /public/images 기준)
export const QUICK_BADGES = [
  { id: 'seed',     label: '씨앗안내',   icon: '/images/seed.png',     keywords: ['씨앗','파종','발아','보관'], defaultReply:'씨앗은 보통 봄 파종이 좋아요 🌱 15~25℃에서 쑥쑥 잘 큰답니다. 궁금한 점 더 물어봐 주세요!' },
  { id: 'sprout',   label: '모종안내',   icon: '/images/sprout.png',   keywords: ['모종','간격','이식'],        defaultReply:'모종 간격은 상추 15~20cm, 토마토 40~60cm가 딱 좋아요 😊 천천히 같이 심어볼까요?' },
  { id: 'farm',     label: '농장안내',   icon: '/images/farm.png',     keywords: ['농장','위치','체험장'],        defaultReply:'우리 리틀파머 체험 농장은 경기도 용인시에 있어요 🚜 길 찾기 도와드릴게요!' },
  { id: 'calendar', label: '예약안내',   icon: '/images/calendar.png', keywords: ['예약','시간','운영'],          defaultReply:'체험 안내 페이지에서 날짜/시간 고르면 바로 예약 가능해요 ✅ 도와드릴까요?' },
  { id: 'shipping', label: '배송안내',   icon: '/images/truck.png',    keywords: ['배송','택배','기간'],          defaultReply:'배송은 결제 후 보통 2~3일! (주말/공휴일 제외) 📦 진행상황도 알려드릴게요.' },
  { id: 'etc',      label: '기타안내',   icon: '/images/more.png',     keywords: ['기타','문의','도움'],          defaultReply:'작은 궁금증도 좋아요! 무엇이든 편하게 남겨주세요 💬' },
];

export const BOT_GREETING = {
  id: 'b-hello',
  role: 'bot',
  text: '안녕하세요, 팜두예요! 궁금한 점을 톡톡 물어봐 주세요. 같이 싹- 해결해 볼까요? 🌱',
  badges: QUICK_BADGES.map(b => b.label),
};

export const SUGGESTIONS = [
  { text: '씨앗 언제 심어요?', tags: ['씨앗','재배','달력'] },
  { text: '씨앗 발아 온도/습도 알려줘', tags: ['씨앗','발아','온도'] },
  { text: '씨앗 보관법 알려줘', tags: ['씨앗','보관'] },
  { text: '모종 심는 간격은?', tags: ['모종','간격'] },
  { text: '오늘 예약 가능한가요?', tags: ['예약'] },
  { text: '배송비는 얼마예요?', tags: ['배송'] },
  { text: '농장 위치 안내', tags: ['농장','위치'] },
];

// ───────────────────────────────────────────────────────────────────────────
// [핵심] 작물별 데이터 뱅크 (자동완성/랜덤답변 소스)
export const CROPS = {
  lettuce: {
    aliases: ['상추','양상추','로메인','잎채소','쌈채'],
    suggestions: [
      '상추 언제 심어요?', '상추 모종 간격은?', '상추 물주기 팁은?',
      '상추 병해 방지법은?', '상추 수확은 어떻게?', '상추 여름에 키우는 법?'
    ],
    topics: {
      when: [
        '상추는 서늘한 15~20℃가 좋아요. 봄·가을에 심으면 튼튼하게 자라요 🍃',
        '여름엔 반그늘과 살짝 차광을 해주면 웃자람을 쏘옥 줄일 수 있어요!',
      ],
      spacing: [
        '포기사이 15~20cm가 좋아요. 통풍이 잘 되면 병도 훨씬 줄어들어요 🙆‍♀️',
        '줄간 20~25cm로 넉넉히~ 상추가 답답해하지 않게요!',
      ],
      water: [
        '겉흙이 밝게 마르면 아침에 듬뿍! 과습은 뿌리가 답답해해요 🪴',
        '여름엔 멀칭으로 수분 꽉- 잡기! 늦저녁 물주기는 잎젖음 길어져 병이 올 수 있어요.',
      ],
      disease: [
        '흰가루/노균은 “통풍·간격·잎 건조” 3종 세트가 정답이에요 ✅',
        '초기엔 라벨 준수 제품 또는 순한 방법으로 가볍게 방제해요.',
      ],
      harvest: [
        '바깥잎부터 쏙쏙~ “컷앤컴”으로 오래오래 수확해요 ✂️',
        '서늘한 시간(아침/저녁)에 따면 더 아삭하고 맛있어요!',
      ],
      summer: [
        '차광망 30% 내외로 시원하게~ 점적 관수로 균일 급수 유지해요.',
        '웃자람이 보이면 간격·통풍 먼저 체크! 상추가 숨 쉴 공간을 좋아해요.',
      ],
    },
  },

  tomato: {
    aliases: ['토마토','방울토마토','대추토마토'],
    suggestions: [
      '토마토 발아/육묘 온도는?', '토마토 곁순/전정 어떻게?', '토마토 물주기/당도 높이는 법?',
      '토마토 칼슘부족(끝마름) 대처?', '토마토 수확 시기는?', '토마토 해충 방제 팁?'
    ],
    topics: {
      when: [
        '발아는 20~28℃가 딱! 4~5월 정식이면 든든해요 🍅',
        '야간 15℃ 이상이면 뿌리도 마음도 안심~ 활착 쑥쑥!',
      ],
      pruning: [
        '곁순은 꽃방 아래부터 살짝살짝 제거해요. 1~2주마다 체크하면 깔끔해요 ✂️',
        '유인은 8자끈으로 살짝 느슨하게~ 줄기가 편안해야 튼튼해요.',
      ],
      water: [
        '“살짝 건조 → 충분히 적심” 리듬이 당도에 도움이 돼요 😋',
        '아침 물주기가 베스트! 과습은 뿌리가 숨막혀요.',
      ],
      calcium: [
        '끝마름엔 “균일 급수 + 칼슘 균형”이 핵심이에요. 과다질소는 잠깐 멈춤!',
        '토양 pH 6.0~6.8 맞춰주면 토마토가 더 좋아해요.',
      ],
      harvest: [
        '착색 70~90% 때 수확해도 맛 좋아요. 보관·수송도 편하답니다 🚜',
        '완숙 직전 수확은 달콤함과 실용성의 황금비!',
      ],
      pest: [
        '총채·가루이는 잎 뒷면 체크가 포인트! 노란 트랩도 함께 써요.',
        '초기 방제 + 통풍 확보로 예방이 반 이상이에요 💪',
      ],
    },
  },

  pepper: {
    aliases: ['고추','풋고추','홍고추','청양고추'],
    suggestions: [
      '고추 정식 시기는?', '고추 물주기/낙과 방지?', '고추 꽃떨림 대처?',
      '고추 비료/웃거름은?', '고추 병해충 예방?', '고추 지지/유인은?'
    ],
    topics: {
      when: [
        '따뜻한 22~28℃를 좋아해요. 서리 걱정 사라지면 정식 고고! 🌶️',
        '야간 15℃ 이상이면 한결 편안하게 자라요.',
      ],
      water: [
        '균일 급수가 핵심! 건조↔과습 반복은 낙과의 원인이에요 🫧',
        '아침 물주기로 하루를 상쾌하게 시작~',
      ],
      fert: [
        '기비는 든든하게, 추비는 “소량·다회”로 촘촘하게!',
        '질소가 너무 많으면 연약해져요. 밸런스가 최고 ✨',
      ],
      flower: [
        '꽃이 떨어지면 온습도/영양부터 체크! 통풍+칼륨 보강이 도움이 돼요.',
        '과밀 식재·고온·건조도 원인이니 천천히 점검해봐요.',
      ],
      disease: [
        '역병·탄저 주의! 배수/멀칭/윤작으로 미리미리 예방하기.',
        '아픈 잎은 바로 제거, 도구는 뽀득뽀득 소독해요 🧼',
      ],
      support: [
        '지지대에 살짝 묶어 바람에도 씩씩하게! Y자 유인도 편해요.',
      ],
    },
  },

  cucumber: {
    aliases: ['오이'],
    suggestions: [
      '오이 수분/착과 잘 되게?', '오이 유인/망 설치는?', '오이 흰가루/노균 대처?',
      '오이 물주기 포인트?', '오이 수확 시기?', '오이 초기 해충 방제?'
    ],
    topics: {
      when: [
        '20~28℃ 따뜻함을 좋아해요. 서리 지난 뒤 정식이 안전해요 🥒',
      ],
      water: [
        '균일 급수 유지가 핵심! 멀칭+점적이면 물 관리가 쉬워져요.',
      ],
      training: [
        '유인망을 세워 쭉쭉! 곁순은 가볍게 정리해서 통풍을 도와요.',
        '8자끈으로 느슨하게 묶어 상처 없이 예쁘게 유인해요.',
      ],
      disease: [
        '흰가루/노균은 잎젖음 시간 줄이기가 포인트! 오전 환기도 좋아요 🌬️',
      ],
      harvest: [
        '품종 크기 도달하면 바로바로 수확! 과숙 전에 따야 아삭해요.',
      ],
      pest: [
        '가루이·총채는 초기에 툭! 잎 뒷면을 자주 살펴요 👀',
      ],
    },
  },

  eggplant: {
    aliases: ['가지'],
    suggestions: [
      '가지 정식/온도는?', '가지 물주기와 비료?', '가지 수확 시기?', '가지 병해충 예방법은?',
      '가지 지지/유인 방법?', '가지 꽃 떨어짐은 왜?'
    ],
    topics: {
      when: [
        '22~30℃가 포근해서 좋아요. 야간 15℃↑일 때 정식하면 든든해요 🍆',
      ],
      water: [
        '고온·건조땐 꽃이 예민해요. 아침에 균일 급수로 편안하게!',
        '멀칭으로 수분 지키고, 뿌리도 따뜻하게 감싸줘요.',
      ],
      fert: [
        '질소 과다는 노노! 복합비료를 소량·다회로 나눠서 깔끔하게 ✨',
        '칼륨은 색과 품질을 반짝 올려줘요.',
      ],
      harvest: [
        '표면이 반짝이고 단단할 때 쏙! 과숙 전에 수확하면 식감이 좋아요.',
      ],
      disease: [
        '역병/세균성 점무늬 주의! 배수·통풍·도구 소독으로 꼼꼼히.',
      ],
      support: [
        '두 줄기(Y자) 유인하면 관리가 편해요. 가지도 어깨 쭉~',
      ],
    },
  },

  pumpkin: {
    aliases: ['호박','애호박','쥬키니','단호박'],
    suggestions: [
      '호박 파종/정식 시기?', '호박 수분/수정 팁?', '호박 수분관리/열과 방지?',
      '호박 병해충 대처?', '호박 덩굴 정리?', '호박 수확 기준?'
    ],
    topics: {
      when: [
        '서리 걱정 끝! 난 뒤 파종/정식하면 든든해요 🎃',
      ],
      pollination: [
        '오전엔 꽃가루가 싱싱~ 수꽃 → 암꽃 톡톡! 2~3일 이어서 해보면 좋아요.',
        '벌 친구들 유입되면 착과가 훨씬 안정적이에요 🐝',
      ],
      water: [
        '과습은 열과의 친구… 균일 급수+멀칭으로 호박을 지켜줘요.',
      ],
      disease: [
        '흰가루/노균/역병엔 통풍·배수·윤작이 든든한 우산 ☔',
      ],
      vine: [
        '과밀한 곁순은 살짝 정리! 햇빛·바람이 쏙쏙 들어와요.',
      ],
      harvest: [
        '단호박은 꼭지가 코르크처럼 마르면 “준비 완료”! 애호박은 알맞을 때 자주자주 ✂️',
      ],
    },
  },

  strawberry: {
    aliases: ['딸기'],
    suggestions: [
      '딸기 화아분화/개화 관리?', '딸기 물주기/관수?', '딸기 병해충 방제?',
      '딸기 과실 오염 방지?', '딸기 수확/후숙?', '딸기 온습도는?'
    ],
    topics: {
      when: [
        '야간 저온이 화아분화에 도움 돼요. 15~22℃ 환경이면 행복해요 🍓',
      ],
      water: [
        '꽃·열매가 젖어 오래있지 않게! 점적·멀칭으로 깨끗함 지켜요.',
      ],
      disease: [
        '잿빛곰팡이는 환기와 잎 건조 시간이 핵심! 부지런한 공기순환이 답이에요.',
      ],
      hygiene: [
        '멀칭/지지대로 열매가 흙에 닿지 않게 톡! 깔끔함이 맛을 지켜줘요.',
      ],
      harvest: [
        '향이 솔솔~ 완전 착색 때 수확이 가장 달콤해요. 후숙은 거의 안 돼요 😊',
      ],
      env: [
        '습도 60~75% 권장, 오전 환기로 상쾌하게 시작해요.',
      ],
    },
  },

  scallion: { // 파 계열 통합
    aliases: ['파','대파','쪽파','실파'],
    suggestions: [
      '파 언제 심어요?', '파 심는 간격은?', '파 물주기/관리 팁?',
      '파 비료/웃거름은?', '파 병해충 대처?', '파 월동/보온 방법?'
    ],
    topics: {
      when: [
        '대파는 2~3월 육묘→4~5월 정식! 가을파종은 8~9월이 좋아요 🧅',
        '쪽파는 8~10월 종구 심기, 실파는 봄·가을 모두 가능해요.',
      ],
      spacing: [
        '대파 줄간 25~30cm, 포기사이 8~12cm! 키 클 땐 흙도 살짝 돋궈줘요.',
        '쪽파는 줄간 15~20cm, 포기 5~8cm로 촘촘 재배도 OK.',
      ],
      water: [
        '겉흙이 마르면 아침에 촉촉~ 과습은 뿌리썩음 주의요!',
        '비 온 뒤엔 배수·통풍 점검 필수. 멀칭이 물잡이에 도움 돼요.',
      ],
      fert: [
        '기비는 퇴비+복합비료, 웃거름은 2~3주 간격으로 소량씩 척척!',
        '과비는 쓰러짐의 지름길… 밸런스가 최고예요.',
      ],
      disease: [
        '노균/녹병엔 통풍·잎 건조가 왕도! 아픈 잎은 바로 정리.',
        '총채/파리류는 트랩+청결관리, 잎 뒷면도 꼼꼼히 살펴요 👀',
      ],
      winter: [
        '부직포+멀칭으로 포근포근! 물고임 지역은 꼭 피해요.',
      ],
    },
  },

  cabbage: {
    aliases: ['양배추','결구배추'],
    suggestions: [
      '양배추 파종/정식?', '양배추 간격/통풍?', '양배추 물주기?',
      '양배추 병해충?', '양배추 수확 기준?', '양배추 토양 pH?'
    ],
    topics: {
      when: [
        '15~20℃ 서늘함을 좋아해요. 봄·가을 재배가 한결 편안해요 🥬',
      ],
      spacing: [
        '포기사이 40~60cm로 넉넉히! 통풍이 병해를 쿨~하게 줄여줘요.',
      ],
      water: [
        '균일 급수가 좋아요. 과습은 뿌리가 힘들어해요 🫧',
      ],
      disease: [
        '좀나방/균핵 주의! 초기 방제+윤작으로 파수꾼처럼 지켜요.',
      ],
      harvest: [
        '결구가 단단~해졌다면 수확 타이밍! 지금이 딱 맛있어요.',
      ],
      soil: [
        'pH 6.0~6.8 추천. 산성이면 석회로 천천히 보정해요.',
      ],
    },
  },

  napa: {
    aliases: ['배추','절임배추','백김치배추','알배기'],
    suggestions: [
      '배추 재배시기?', '배추 물주기/결구?', '배추 벌레 방제?',
      '배추 웃거름 타이밍?', '배추 수확 시기?', '배추 석회/토양 pH?'
    ],
    topics: {
      when: [
        '가을 파종(8~9월)이 안정적이에요. 고온기 정식이면 차광으로 도와줘요 🥗',
      ],
      water: [
        '결구기엔 “균일 급수”가 핵심! 과습은 병을 부르니 살살~',
      ],
      pest: [
        '나방류는 초기에 툭! 방충망·멀칭도 큰 도움 돼요.',
      ],
      fert: [
        '기비 든든히, 결구 전후엔 소량 다회 웃거름으로 탄탄하게.',
      ],
      harvest: [
        '단단하게 결구되고 외엽이 건강하면 수확 타이밍이에요 ✨',
      ],
      soil: [
        'pH 6.0~6.8 권장, 산성 보정은 석회로 천천히!',
      ],
    },
  },

  onion: {
    aliases: ['양파'],
    suggestions: [
      '양파 파종/정식?', '양파 물주기?', '양파 구비대 촉진?',
      '양파 병해충?', '양파 수확·건조?', '양파 보관 팁?'
    ],
    topics: {
      when: [
        '가을 파종→월동 후 초여름 수확이에요. 지역마다 살짝 차이 있어요 🙂',
      ],
      water: [
        '과습은 구근이 싫어해요. 균일 급수+배수 체크로 뿌리 편안하게!',
      ],
      bulb: [
        '일장과 온도의 힘이 커요! 잡초 제거·멀칭으로 스트레스 뚝.',
      ],
      disease: [
        '노균/잎마름 조심! 통풍+윤작+초기 방제가 든든해요.',
      ],
      harvest: [
        '잎이 70% 넘게 고개 숙이면 수확 쏙~ 그늘 통풍 건조로 마무리!',
      ],
      store: [
        '완전히 말린 뒤 망걸이에 척! 서늘·건조한 곳이 좋아요 🧺',
      ],
    },
  },

  garlic: {
    aliases: ['마늘'],
    suggestions: [
      '마늘 파종/쪽마늘 심기?', '마늘 멀칭/월동?', '마늘 비료/웃거름?',
      '마늘 병해충?', '마늘 수확 시기?', '마늘 건조/보관?'
    ],
    topics: {
      when: [
        '가을(10~11월)에 심고 겨울 잘 보내면 초여름에 든든한 수확! 🧄',
      ],
      mulch: [
        '짚멀칭으로 포근포근! 보온+잡초억제, 배수로도 챙겨요.',
      ],
      fert: [
        '월동 뒤 생육기에 소량·다회 웃거름으로 힘을 채워요.',
      ],
      disease: [
        '균핵/녹병 주의! 윤작·아픈 잎 제거·도구 소독으로 똑똑하게.',
      ],
      harvest: [
        '아랫잎 3~4장 마르면 수확 준비 완료! 통풍 건조로 향을 지켜요.',
      ],
      store: [
        '한지망에 매달아 서늘·통풍 좋은 곳에 보관해요.',
      ],
    },
  },

  carrot: {
    aliases: ['당근'],
    suggestions: [
      '당근 파종깊이/간격?', '당근 물주기?', '당근 솎음 요령?',
      '당근 병해충?', '당근 수확 시기?', '당근 토양/배수?'
    ],
    topics: {
      when: [
        '봄·가을 서늘할 때 좋아요. 미세종자라 얕게 살짝만 파종해요 🥕',
      ],
      spacing: [
        '발아 뒤 2~3번 솎아 최종 5~8cm 간격이면 알록달록 예쁘게 자라요.',
      ],
      water: [
        '균일 급수로 갈라짐 예방! 과습은 병을 부를 수 있어요.',
      ],
      disease: [
        '잎마름/진딧물은 초기에 툭! 윤작으로 힘을 보탤게요.',
      ],
      harvest: [
        '굵기 2~3cm부터 야금야금 수확 가능! 기분 좋은 아삭함 ✨',
      ],
      soil: [
        '심토는 깊게, 자갈은 싹~ 제거! 배수 좋은 흙이면 더 행복해요.',
      ],
    },
  },

  potato: {
    aliases: ['감자'],
    suggestions: [
      '감자 파종/싹틔우기?', '감자 북주기/흙돋움?', '감자 물주기?',
      '감자 역병 예방?', '감자 수확 기준?', '감자 보관 온도?'
    ],
    topics: {
      when: [
        '씨감자 싹틔우고 3~4월 파종! 가을감자는 8~9월이 좋아요 🥔',
      ],
      hilling: [
        '싹이 15cm쯤이면 흙을 살짝 올려 햇빛에 노출된 부분은 가려줘요(녹변 방지!)',
      ],
      water: [
        '개화기 전후 수분이 중요해요. 과습은 역병을 부르니 조심조심!',
      ],
      disease: [
        '역병은 빠른 대처가 답! 감자·토마토 연작은 피하고 통풍을 챙겨요.',
      ],
      harvest: [
        '윗잎이 자연스럽게 고사하면 수확 타임~ 그늘에서 통풍 건조해요.',
      ],
      store: [
        '5℃ 전후, 어둡고 서늘한 곳에 보관하면 싹이 덜 나요.',
      ],
    },
  },
};

// ───────────────────────────────────────────────────────────────────────────
// 서비스(모종/농장/예약/택배/기타) 자동완성/랜덤답변 뱅크 — cute tone
export const SERVICES = {
  seedling: { // 모종안내
    aliases: ['모종','육묘','이식','정식','간격','활착','순화'],
    suggestions: [
      '모종 언제 옮겨심어요?', '모종 심는 간격은?', '모종 활착 빨라지게 하려면?',
      '정식 전 순화 어떻게?', '정식 당일 관리 팁은?', '모종 물주기 요령은?'
    ],
    topics: {
      when: [
        '본엽 3~4장, 뿌리가 컵을 살짝 감쌌을 때가 골든타임이에요 🌟',
        '야간 12~15℃ 이상이면 스트레스 덜 받아요. 따뜻할 때 옮겨요!',
      ],
      spacing: [
        '엽채 15~20cm, 토마토 40~60cm, 고추 30~40cm! 숨 쉴 공간이 건강의 비밀 💚',
        '과밀 식재는 아쉬워요. 통풍이 좋아야 병에도 강해져요.',
      ],
      harden: [
        '정식 5~7일 전, 햇빛·바람·온도를 천천히 늘리며 순화해요 🌤️',
        '마지막 1~2일은 급수를 살짝 줄여 뿌리가 단단해지게 도와요.',
      ],
      watering: [
        '정식 직후엔 뿌리 주변을 흠뻑! 이후엔 겉흙이 말랐을 때 아침 급수로 상쾌하게.',
        '받침대 고인 물은 쏙 비워요. 뿌리가 숨 쉬어야 하거든요 😊',
      ],
      settle: [
        '첫 주는 강한 햇빛/바람을 피하고, 차광망으로 포근하게 돌봐요.',
        '활착기엔 질소 과비는 잠깐 멈춤! 칼륨·칼슘으로 균형 잡아요.',
      ],
    },
  },

  farm: { // 농장안내
    aliases: ['농장','체험장','위치','찾아오는길','주차','운영시간','문의'],
    suggestions: [
      '농장 위치가 어디예요?', '대중교통/주차 안내 부탁해요', '운영 시간은 어떻게 되나요?',
      '입장/체험 요금은?', '우천 시 체험 가능한가요?', '현장 결제/영수증 되나요?'
    ],
    topics: {
      location: [
        '농장은 경기도 용인시에 있어요 🚜 네비에서 “리틀파머 체험 농장”을 찾아주세요!',
        '정문 앞 주차 가능해요. 주말 만차 시엔 안내에 따라 보조 구역 이용을 부탁드려요.',
      ],
      hours: [
        '운영은 오전 10시 ~ 오후 5시예요. (점심 12~13시 일부 체험 잠깐 쉬어요)',
        '우천/혹서엔 일부 조정될 수 있어요. 방문 전 공지 한 번만 봐주실까요? ☔',
      ],
      fees: [
        '프로그램별 요금이 달라요. 현장·온라인 결제 모두 OK, 현금영수증도 가능해요!',
        '단체/가족은 사전 문의 시 더 착한 안내 드릴게요 😊',
      ],
      weather: [
        '가벼운 비는 우의·장화로 체험 가능! 호우/낙뢰 땐 안전을 위해 잠시 멈춤해요.',
        '비 오는 날엔 대체 체험을 안내드릴게요. 스태프에게 편히 물어보세요.',
      ],
      contact: [
        '문의는 채팅 또는 대표번호로 톡톡! 평일 10~17시에 빠르게 답변드려요 📞',
        '현장 상황에 따라 살짝 지연될 수 있어요. 조금만 기다려주시면 감사해요 🙏',
      ],
    },
  },

  reservation: { // 예약안내
    aliases: ['예약','예매','신청','변경','취소','환불','인원','날짜','시간'],
    suggestions: [
      '예약은 어디서 하나요?', '예약 가능한 날짜가 궁금해요', '예약 변경/취소는 어떻게?',
      '인원/연령 제한 있나요?', '단체 예약 가능한가요?', '비성수기 할인 있어요?'
    ],
    topics: {
      how: [
        '농장 예약 페이지에서 날짜·시간 고르면 바로 예약 완료예요 ✅',
        '당일 현장접수는 혼잡 시 어려울 수 있어요. 온라인 예약을 살짝 추천드려요!',
      ],
      change: [
        '변경/취소는 마이팜에서 쓱~ 가능해요. 마감 임박 시 수수료가 생길 수도 있어요.',
        '우천/천재지변 등은 규정에 따라 수수료 없이 조정 도와드려요.',
      ],
      headcount: [
        '유아는 보호자 동행이 필요해요. 안전수칙도 함께 체크해요 👨‍👩‍👧',
        '단체(10인+)는 별도 문의 시 맞춤 프로그램으로 즐거움 업!',
      ],
      slots: [
        '성수기엔 주말·공휴일 오전이 금방 마감돼요. 미리 예약하면 든든해요 ✨',
        '비성수기 평일은 비교적 여유로워요. 당일 예약도 가능할 수 있어요.',
      ],
      refund: [
        '환불 규정: D-3 100% / D-2 50% / D-1~당일은 제한될 수 있어요.',
        '단체 예약은 별도 약관 적용이에요. 자세한 건 안내 드릴게요!',
      ],
    },
  },

  shipping: { // 택배안내
    aliases: ['택배','배송','택배비','배송비','출고','도착','묶음','주소','파손'],
    suggestions: [
      '배송비/묶음배송 되나요?', '언제 출고/도착하나요?', '주문 후 주소 변경 가능해요?',
      '파손/오배송 처리는?', '냉해/과열 피해 대처는?', '추적(송장) 어디서 보나요?'
    ],
    topics: {
      fee: [
        '배송비는 지역·중량에 따라 달라요. 장바구니에서 자동 계산되어 편해요 💌',
        '여러 상품을 한 번에 결제하면 묶음배송이 적용될 수 있어요.',
      ],
      when: [
        '영업일 기준 1~2일 내 출고, 보통 2~3일 내 도착해요(주말/공휴일 제외) 📦',
        '산간/도서지역은 하루이틀 더 소요될 수 있어요. 조금만 기다려 주세요!',
      ],
      address: [
        '출고 전까지 마이팜에서 주소 변경 가능! 출고 후엔 택배사 문의가 빨라요.',
        '주소 오기입 반송·재배송은 추가 비용이 생길 수 있어요. 함께 확인해볼까요?',
      ],
      damage: [
        '파손/오배송은 사진과 함께 알려주세요. 빠르게 재발송·환불 도와드릴게요 🙏',
        '식물은 계절에 따라 보온/냉매 패킹으로 포근히 챙겨 보낼게요.',
      ],
      tracking: [
        '송장은 출고 시 알림으로 딱! 마이팜 주문내역에서도 확인할 수 있어요.',
        '연휴/성수기엔 물량 증가로 지연될 수 있어요. 계속 살펴보고 알려드릴게요!',
      ],
    },
  },

  etc: { // 기타안내
    aliases: ['기타','문의','도움','가이드','도움말','공지'],
    suggestions: [
      '문의는 어디로 하면 되나요?', '초보 텃밭 가이드 있어요?', '계절별 재배 캘린더?',
      '준비물/복장 안내', '안전수칙/주의사항 알려줘', 'A/S 및 피드백 접수'
    ],
    topics: {
      contact: [
        '채팅으로 톡톡 남겨주세요! 평일 10~17시에 빠르게 도와드릴게요 💬',
        '긴급 문의는 대표번호로 연결해 드릴게요. 언제든 편하게 말씀해요!',
      ],
      guide: [
        '초보자라면 “씨앗→파종→육묘→정식→관리→수확” 흐름으로 보면 쉬워요 🌿',
        '계절 체크리스트(봄 파종, 여름 차광·관수, 가을 정식, 겨울 월동)로 척척!',
      ],
      prep: [
        '체험은 편한 복장·운동화 추천! 여름엔 모자·물, 겨울엔 따뜻한 옷 챙겨요 👒',
        '장갑/소형 도구는 현장 대여 가능해요. 가볍게 오셔도 좋아요!',
      ],
      safety: [
        '아이들과 도구 사용할 땐 보호자 동행 필수! 미끄러운 곳은 살짝 조심해요 😊',
        '농약·자재는 라벨 준수, 음식물 반입은 일부 제한될 수 있어요.',
      ],
      feedback: [
        'A/S·피드백은 주문내역 또는 채팅으로 남겨주세요. 소중한 의견 꼭 반영할게요 💚',
        '불편하신 점은 구체적으로 알려주실수록 더 빨리 도와드릴 수 있어요!',
      ],
    },
  },
};

// ───────────────────────────────────────────────────────────────────────────
// 유틸 · 감지 함수
const pick = (arr) => arr[Math.floor(Math.random() * arr.length)];

export function detectCrop(raw='') {
  const t = raw.toLowerCase();
  for (const [key, v] of Object.entries(CROPS)) {
    if (v.aliases.some(a => t.includes(a.toLowerCase()))) return key;
  }
  return null;
}

export function detectService(raw='') {
  const t = raw.toLowerCase();
  for (const [key, v] of Object.entries(SERVICES)) {
    if (v.aliases.some(a => t.includes(a.toLowerCase()))) return key;
  }
  return null;
}

// ───────────────────────────────────────────────────────────────────────────
// 자동완성: 작물 + 서비스 추천 병합
export function getDynamicServiceSuggestions(input='', limit=6) {
  const id = detectService(input);
  if (!id) return [];
  const svc = SERVICES[id];
  const kw = input.toLowerCase();
  const scored = (svc.suggestions || [])
    .map(q => ({ q, score: q.toLowerCase().includes(kw) ? 2 : 1 }))
    .sort((a,b)=>b.score-a.score)
    .map(s=>s.q);
  return Array.from(new Set(scored)).slice(0, limit);
}

export function getDynamicSuggestions(input='', limit=6) {
  const kw = input.toLowerCase();

  const cropId = detectCrop(input);
  const cropList = cropId ? (CROPS[cropId].suggestions || []) : [];
  const svcList = getDynamicServiceSuggestions(input, limit);

  const baseList = SUGGESTIONS
    .filter(s => s.text.includes(input) || s.tags?.some(t => kw.includes(t)))
    .map(s => s.text);

  const all = [...svcList, ...cropList, ...baseList];
  const scored = all.map(q => ({ q, score: q.toLowerCase().includes(kw) ? 2 : 1 }))
    .sort((a,b)=>b.score-a.score)
    .map(s=>s.q);

  return Array.from(new Set(scored)).slice(0, limit);
}

// ───────────────────────────────────────────────────────────────────────────
// 랜덤 변형 답변: 서비스 → 작물
export function getServiceVariantReply(raw='') {
  const id = detectService(raw);
  if (!id) return null;
  const svc = SERVICES[id];
  const t = raw.replace(/\s+/g,'').toLowerCase();

  const hint = {
    when: /(언제|시기|시간|운영|출고|도착)/.test(t),
    spacing: /(간격|거리)/.test(t),
    harden: /(순화|활착|적응)/.test(t),
    watering: /(물주기|급수|관수)/.test(t),
    settle: /(정식후|정식직후|활착)/.test(t),

    location: /(위치|찾아오는길|주차)/.test(t),
    hours: /(운영시간|영업시간|시간)/.test(t),
    fees: /(요금|가격|비용)/.test(t),
    weather: /(우천|비|날씨)/.test(t),
    contact: /(문의|연락|전화|상담)/.test(t),

    how: /(어디서|방법|신청|예약)/.test(t),
    change: /(변경|취소|환불)/.test(t),
    headcount: /(인원|연령|단체)/.test(t),
    slots: /(가능|마감|달력)/.test(t),
    refund: /(환불|수수료)/.test(t),

    fee: /(배송비|택배비|묶음)/.test(t),
    whenShip: /(출고|도착|배송)/.test(t),
    address: /(주소|변경)/.test(t),
    damage: /(파손|오배송|냉해|과열)/.test(t),
    tracking: /(송장|추적|배송조회)/.test(t),

    guide: /(가이드|초보|캘린더)/.test(t),
    prep: /(준비물|복장)/.test(t),
    safety: /(안전|주의)/.test(t),
    feedback: /(피드백|as|a\/s|고장|불편)/.test(t),
  };

  const order = [
    'when','spacing','harden','watering','settle',
    'location','hours','fees','weather','contact',
    'how','change','headcount','slots','refund',
    'fee','whenShip','address','damage','tracking',
    'guide','prep','safety','feedback'
  ];

  for (const k of order) {
    if (hint[k] && svc.topics[k]?.length) return pick(svc.topics[k]);
  }
  const all = Object.values(svc.topics).flat();
  return all.length ? pick(all) : null;
}

export function getCropVariantReply(raw='') {
  const cropId = detectCrop(raw);
  if (!cropId) return null;
  const crop = CROPS[cropId];
  const t = raw.replace(/\s+/g,'').toLowerCase();

  const hint = {
    when: /(언제|달력|시기|파종|정식|육묘)/.test(t),
    spacing: /(간격|거리|줄간|포기사이|솎음)/.test(t),
    water: /(물주기|급수|관수|건조|과습)/.test(t),
    fert: /(비료|거름|시비|웃거름|퇴비)/.test(t),
    disease: /(병|병해|노균|흰가루|역병|곰팡이|해충|진딧물|총채|가루이|응애|나방|파리)/.test(t),
    harvest: /(수확|언제따|언제딸|후숙|저장)/.test(t),
    support: /(지지|유인|트렐리스|망|끈|전정|곁순|적심)/.test(t),
    pollination: /(수정|수분|꽃가루|암꽃|수꽃)/.test(t),
    soil: /(토양|흙|pH|석회|배수|심토)/.test(t),
    mulch: /(멀칭|짚|부직포|비닐)/.test(t),
    env: /(온도|습도|환기|차광|폭염|한파|월동|보온)/.test(t),
    bulb: /(구비대|구근|비대)/.test(t),
    hilling: /(북주기|흙돋움)/.test(t),
    vine: /(덩굴|곁순)/.test(t),
    pruning: /(전정|곁순|적심)/.test(t),
    calcium: /(칼슘|끝마름)/.test(t),
    pest: /(해충|진딧물|총채|가루이|응애|나방|파리)/.test(t),
    hygiene: /(청결|오염|지지대)/.test(t),
    flower: /(꽃떨림|낙화)/.test(t),
    bulbdev: /(구비대|비대)/.test(t),
    store: /(건조|보관)/.test(t),
    training: /(유인|망)/.test(t),
    summer: /(여름|폭염)/.test(t),
    winter: /(겨울|월동|서리|한파)/.test(t),
  };

  const order = ['when','spacing','water','fert','disease','harvest','support','pollination','soil','mulch','env','calcium','flower','pest','hygiene','bulb','bulbdev','hilling','training','vine','summer','winter','store','pruning'];
  for (const k of order) {
    if (hint[k] && crop.topics[k]?.length) return pick(crop.topics[k]);
  }
  const all = Object.values(crop.topics).flat();
  return all.length ? pick(all) : null;
}

// ───────────────────────────────────────────────────────────────────────────
// 규칙형 INTENTS (백업용)
export const INTENTS = [
  { id:'seed_when', test: t => /씨앗.*언제|언제.*씨앗/.test(t), reply:'씨앗은 보통 봄 파종이 좋아요 🌱 낮 기온 15~25℃면 더 싱그럽게 자라요!' },
  { id:'germ_temp', test: t => t.includes('씨앗') && (t.includes('발아')||t.includes('온도')||t.includes('습도')), reply:'발아는 20℃ 안팎, 습도 60% 정도가 딱 좋아요. 궁금한 품종도 알려주세요 💚' },
  { id:'seed_store', test: t => t.includes('씨앗') && t.includes('보관'), reply:'씨앗은 서늘하고 건조한 곳에 밀봉 보관이 좋아요. 라벨도 함께 보관하면 더 좋아요!' },
];

// ───────────────────────────────────────────────────────────────────────────
// 최종 응답 판정: 서비스 → 작물 → 규칙형 → 배지 → 기본
export function getReplyFromData(raw='') {
  const t = raw.replace(/\s+/g, '').toLowerCase();

  // 1) 서비스(모종/농장/예약/택배/기타) 랜덤 응답
  const s = getServiceVariantReply(raw);
  if (s) return s;

  // 2) 작물 랜덤 응답
  const v = getCropVariantReply(raw);
  if (v) return v;

  // 3) 규칙형 백업
  const rule = INTENTS.find(r => r.test(t));
  if (rule) return rule.reply;

  // 4) 배지 키워드 기본응답
  const badge = QUICK_BADGES.find(b => b.keywords.some(k => t.includes(k.toLowerCase())));
  if (badge) return badge.defaultReply;

  // 5) 기본
  return '좋은 질문이에요! 조금만 더 자세히 알려주시면 딱 맞게 도와드릴게요 🌿';
}
